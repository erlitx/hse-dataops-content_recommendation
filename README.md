 –û—Ç–≤–µ—Ç—ã –Ω–∞ –î–ó_6 - https://docs.google.com/spreadsheets/d/1A7_cG2q09tsMCPiwVticoSSdM21mUalIJra9Y3VlOko/edit?gid=0#gid=0

# üé¨ MovieLens Recommender ‚Äì MLOps –ø—Ä–æ–µ–∫—Ç

–£—á–µ–±–Ω—ã–π –ø—Ä–æ–µ–∫—Ç –ø–æ –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏—é —Å–∏—Å—Ç–µ–º—ã –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã—Ö —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π —Ñ–∏–ª—å–º–æ–≤ –Ω–∞ –æ—Å–Ω–æ–≤–µ –¥–∞—Ç–∞—Å–µ—Ç–∞ MovieLens –∏ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—é –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã –≤ Yandex Cloud —Å –ø–æ–º–æ—â—å—é Terraform –∏ Ansible. –ü—Ä–æ–µ–∫—Ç –¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É–µ—Ç –ø–æ–ª–Ω—ã–π —Ü–∏–∫–ª: –æ—Ç –º–æ–¥–µ–ª–∏ –∏ API –Ω–∞ FastAPI –¥–æ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ —Ä–∞–∑–≤—ë—Ä—Ç—ã–≤–∞–Ω–∏—è –Ω–∞ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–π –º–∞—à–∏–Ω–µ.

---

## üìå –û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞

–°–µ—Ä–≤–∏—Å —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç –ø–æ–≤–µ–¥–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∏ –æ—Ç–¥–∞—ë—Ç –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Å–ø–∏—Å–æ–∫ —Ñ–∏–ª—å–º–æ–≤ –ø–æ –∏—Ö –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä—É.  
–í –ø—Ä–æ–µ–∫—Ç–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã:

- API –Ω–∞ FastAPI —Å —ç–Ω–¥–ø–æ–∏–Ω—Ç–∞–º–∏ `/health` –∏ `/recommendations`.  
- –ó–∞–≥—Ä—É–∑–∫–∞ –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ MovieLens‚Äë–¥–∞—Ç–∞—Å–µ—Ç–∞ —á–µ—Ä–µ–∑ `kagglehub`. 
- –ú–æ–¥–µ–ª—å —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π, –∏–Ω–∫–∞–ø—Å—É–ª–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –≤ –∫–ª–∞—Å—Å–µ `MovieLensRecommender`.   
- Terraform‚Äë–∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –¥–ª—è —Ä–∞–∑–≤—ë—Ä—Ç—ã–≤–∞–Ω–∏—è –í–ú –≤ Yandex Cloud (VPC, –ø–æ–¥—Å–µ—Ç—å, –í–ú, IP‚Äë–∞–¥—Ä–µ—Å–∞). 
---

## üìä –ò—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –¥–∞–Ω–Ω—ã–µ

–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –Ω–µ–±–æ–ª—å—à–æ–π MovieLens‚Äë–¥–∞—Ç–∞—Å–µ—Ç, –∑–∞–≥—Ä—É–∂–∞–µ–º—ã–π –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è —Å –ø–æ–º–æ—â—å—é `kagglehub.dataset_download`. 
–î–∞—Ç–∞—Å–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–∫–∞—á–∏–≤–∞–µ—Ç—Å—è –∏ –ø–µ—Ä–µ–¥–∞—ë—Ç—Å—è –≤ `MovieLensRecommender`, –∫–æ—Ç–æ—Ä—ã–π —Å—Ç—Ä–æ–∏—Ç –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–ª—è –≤—ã–¥–∞—á–∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π. 

---

## üß± –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è



# –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
recommender-system/
‚îÇ  
‚îú‚îÄ‚îÄ data/
‚îú‚îÄ‚îÄ notebooks/
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ data/
‚îÇ   ‚îú‚îÄ‚îÄ features/
‚îÇ   ‚îú‚îÄ‚îÄ models/
‚îÇ   ‚îú‚îÄ‚îÄ evaluation/
‚îÇ   ‚îî‚îÄ‚îÄ utils/
‚îú‚îÄ‚îÄ docker/
‚îú‚îÄ‚îÄ mlflow/
‚îú‚îÄ‚îÄ ci/
‚îú‚îÄ‚îÄ config/
‚îú‚îÄ‚îÄ requirements.txt
‚îî‚îÄ‚îÄ README.md
```

## üöÄ –õ–æ–∫–∞–ª—å–Ω—ã–π –∑–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

1. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π:
pip install -r requirements.txt

##  –ó–∞–ø—É—Å–∫ FastAPI‚Äë—Å–µ—Ä–≤–∏—Å–∞:
uvicorn app.main:app --host 0.0.0.0 --port 8000

## –¢–µ—Å—Ç—ã
pytest tests/

3. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã API:

- Health check: `GET http://localhost:8000/health` ‚Äî –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å—Ç–∞—Ç—É—Å —Å–µ—Ä–≤–∏—Å–∞. [file:4][file:6]  
- –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏: `POST http://localhost:8000/recommendations` —Å JSON‚Äë—Ç–µ–ª–æ–º, —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–º `RecommendationRequest`. [file:4][file:6]  
- –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è: `http://localhost:8000/docs` ‚Äî –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω–∞—è Swagger‚Äë–¥–æ–∫–∞. [file:4][file:6]  

–ü—Ä–∏ —Å—Ç–∞—Ä—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è —á–µ—Ä–µ–∑ lifespan‚Äë–∫–æ–Ω—Ç–µ–∫—Å—Ç –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –¥–∞—Ç–∞—Å–µ—Ç MovieLens –∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç—Å—è –æ–±—ä–µ–∫—Ç `MovieLensRecommender`. [file:4][file:6]

---

## üõ† –ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –≤ Yandex Cloud (Terraform)

–î–ª—è —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è –í–ú –≤ Yandex Cloud –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è Terraform‚Äë–ø—Ä–æ–µ–∫—Ç, —Å–æ—Å—Ç–æ—è—â–∏–π –∏–∑ `main.tf`, `variables.tf`, `provider.tf` –∏ `terraform.tfvars`. 
–°–æ–∑–¥–∞—é—Ç—Å—è:

- VPC‚Äë—Å–µ—Ç—å –∏ –ø–æ–¥—Å–µ—Ç—å –≤ –∑–∞–¥–∞–Ω–Ω–æ–π –∑–æ–Ω–µ (`var.zone`). 
- –û–¥–Ω–∞ –∏–ª–∏ –¥–≤–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã–µ –º–∞—à–∏–Ω—ã —Å –∑–∞–¥–∞–Ω–Ω—ã–º–∏ —Ä–µ—Å—É—Ä—Å–∞–º–∏ (vCPU, RAM, –æ–±—Ä–∞–∑ Ubuntu 22.04 LTS). 
- –ü—É–±–ª–∏—á–Ω—ã–µ IP‚Äë–∞–¥—Ä–µ—Å–∞, –∫–æ—Ç–æ—Ä—ã–µ –≤—ã–≤–æ–¥—è—Ç—Å—è —á–µ—Ä–µ–∑ –±–ª–æ–∫–∏ `output` (–≤–Ω–µ—à–Ω–∏–π –∏ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π IP). 

–ê —Ç–∞–∫ –∂–µ –º–æ–∂–Ω–æ –≤–æ—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è —Å–∫—Ä–∏–ø—Ç–æ–º deploy_terraform.sh

### –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞

1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å Terraform –∏ Yandex Cloud CLI (`yc`). 
2. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –ø—Ä–æ—Ñ–∏–ª—å –≤ `yc`:

## üõ† –ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –≤ Yandex Cloud (Terraform)

–î–ª—è —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è –í–ú –≤ Yandex Cloud –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è Terraform‚Äë–ø—Ä–æ–µ–∫—Ç, —Å–æ—Å—Ç–æ—è—â–∏–π –∏–∑ `main.tf`, `variables.tf`, `provider.tf` –∏ `terraform.tfvars`.
–°–æ–∑–¥–∞—é—Ç—Å—è:

- VPC‚Äë—Å–µ—Ç—å –∏ –ø–æ–¥—Å–µ—Ç—å –≤ –∑–∞–¥–∞–Ω–Ω–æ–π –∑–æ–Ω–µ (`var.zone`). 
- –û–¥–Ω–∞ –∏–ª–∏ –¥–≤–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã–µ –º–∞—à–∏–Ω—ã —Å –∑–∞–¥–∞–Ω–Ω—ã–º–∏ —Ä–µ—Å—É—Ä—Å–∞–º–∏ (vCPU, RAM, –æ–±—Ä–∞–∑ Ubuntu 22.04 LTS).  
- –ü—É–±–ª–∏—á–Ω—ã–µ IP‚Äë–∞–¥—Ä–µ—Å–∞, –∫–æ—Ç–æ—Ä—ã–µ –≤—ã–≤–æ–¥—è—Ç—Å—è —á–µ—Ä–µ–∑ –±–ª–æ–∫–∏ `output` (–≤–Ω–µ—à–Ω–∏–π –∏ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π IP). 

## –†–∞–±–æ—Ç–∞ —Å yandex CLI

1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å Terraform –∏ Yandex Cloud CLI (`yc`).  
2. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –ø—Ä–æ—Ñ–∏–ª—å –≤ `yc`:

```
yc init
```

3. –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –∑–Ω–∞—á–µ–Ω–∏—è `cloud_id`, `folder_id`, `zone`, SSH‚Äë–∫–ª—é—á–∞ –∏ –æ–±—Ä–∞–∑–∞ Ubuntu –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ —É–∫–∞–∑–∞–Ω—ã –≤ `variables.tf` –∏ `terraform.tfvars`. 

### –†–∞–∑–≤—ë—Ä—Ç—ã–≤–∞–Ω–∏–µ

–ø–µ—Ä–µ–π—Ç–∏ –≤ –∫–∞—Ç–∞–ª–æ–≥ —Å Terraform-–∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–µ–π
```
cd .

terraform init
terraform plan
terraform apply
```


–ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ `terraform apply` –≤ –∫–æ–Ω—Å–æ–ª–∏ –±—É–¥—É—Ç –ø–æ–∫–∞–∑–∞–Ω—ã –∑–Ω–∞—á–µ–Ω–∏—è `output` —Å –≤–Ω–µ—à–Ω–∏–º IP‚Äë–∞–¥—Ä–µ—Å–æ–º –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–π –º–∞—à–∏–Ω—ã, –Ω–∞–ø—Ä–∏–º–µ—Ä `externalipaddressvm1`. 


### –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –ø–æ SSH
```
ssh <ssh_user>@<external_ip>
```

–ì–¥–µ `<ssh_user>` ‚Äî –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å, —É–∫–∞–∑–∞–Ω–Ω—ã–π –≤ Terraform‚Äë–ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö, –∞ `<external_ip>` ‚Äî IP –∏–∑ –±–ª–æ–∫–∞ `output`. 

### –û—á–∏—Å—Ç–∫–∞ —Ä–µ—Å—É—Ä—Å–æ–≤

–î–ª—è —É–¥–∞–ª–µ–Ω–∏—è –≤—Å–µ—Ö —Å–æ–∑–¥–∞–Ω–Ω—ã—Ö Terraform‚Äë—Ä–µ—Å—É—Ä—Å–æ–≤:

```
terraform destroy
```


---

## ü§ñ –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –í–ú (Ansible, –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

–î–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –æ–∫—Ä—É–∂–µ–Ω–∏—è –Ω–∞ –í–ú (—É—Å—Ç–∞–Ω–æ–≤–∫–∞ Python, —Å–æ–∑–¥–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, –¥–µ–ø–ª–æ–π –∫–æ–¥–∞ –∏ –∑–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è) –º–æ–∂–µ—Ç –±—ã—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω Ansible‚Äëplaybook.  
–¢–∏–ø–∏—á–Ω—ã–π —Å—Ü–µ–Ω–∞—Ä–∏–π:

- —É—Å—Ç–∞–Ω–æ–≤–∫–∞ Python 3 –∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã—Ö —Å–∏—Å—Ç–µ–º–Ω—ã—Ö –ø–∞–∫–µ—Ç–æ–≤;  
- —Å–æ–∑–¥–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –¥–ª—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è (–Ω–∞–ø—Ä–∏–º–µ—Ä, `ml-dev`);  
- –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ `main.py` –∏ `requirements.txt` –Ω–∞ —Å–µ—Ä–≤–µ—Ä;  
- —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –≤ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ;  
- –∑–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è —á–µ—Ä–µ–∑ `uvicorn` (–Ω–∞–ø—Ä–∏–º–µ—Ä, –∫–∞–∫ systemd‚Äëservice).  

–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å–∫—Ä–∏–ø—Ç run_ansible.sh
---

## üê≥ Docker 

–î–ª—è —É–ø–∞–∫–æ–≤–∫–∏ FastAPI‚Äë—Å–µ—Ä–≤–∏—Å–∞ –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è Dockerfile –Ω–∞ –±–∞–∑–µ python:3.11-slim 
<br>
c —É—Å—Ç–∞–Ω–æ–≤–∫–æ–π –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –∏–∑ requirements.txt –∏ –∑–∞–ø—É—Å–∫–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è —á–µ—Ä–µ–∑ uvicorn app.main:app.


```
docker build -t ml-app:1.0 -f docker/Dockerfile .
docker run --rm -p 8000:8000 ml-app:1.0
```


–ó–∞–ø—É—Å–∫ —á–µ—Ä–µ–∑ docker-compose:

#### –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–∏—Å–∞
```
docker-compose up -d --build
```
#### –û—Å—Ç–∞–Ω–æ–≤–∫–∞
```
docker-compose down
```

–õ–∏–±–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å–∫—Ä–∏–ø—Ç run_docker.sh


–î–ª—è —É–º–µ–Ω—å—à–µ–Ω–∏—è —Ä–∞–∑–º–µ—Ä–∞ –æ–±—Ä–∞–∑–∞ –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è –º–Ω–æ–≥–æ—ç—Ç–∞–ø–Ω–∞—è —Å–±–æ—Ä–∫–∞:

–ù–∞ —ç—Ç–∞–ø–µ builder –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ —Å–æ–±–∏—Ä–∞—é—Ç—Å—è –≤ –≤–∏–¥–µ wheel‚Äë—Ñ–∞–π–ª–æ–≤ (pip wheel),

–ù–∞ —Ñ–∏–Ω–∞–ª—å–Ω–æ–º —ç—Ç–∞–ø–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—é—Ç—Å—è –∏–∑ –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ –∫–∞—Ç–∞–ª–æ–≥–∞ /wheels –±–µ–∑ –æ–±—Ä–∞—â–µ–Ω–∏—è –∫ –≤–Ω–µ—à–Ω–µ–º—É —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—é.
```
# –°–±–æ—Ä–∫–∞ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –æ–±—Ä–∞–∑–∞
docker build -t ml-app:1.0-slim -f docker/Dockerfile_extend .

# –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–æ–≤ –æ–±—Ä–∞–∑–æ–≤
docker images | grep ml-app

ml-app                                          1.0-slim                  bce6d5de5b07   54 seconds ago   2.55GB
ml-app                                          1.0                       9fbabd9194a3   11 minutes ago   2.61GB

```

# –°—Ç—Ä–∞—Ç–µ–≥–∏—è –≤–µ—Ç–≤–ª–µ–Ω–∏—è

–í –¥–∞–Ω–Ω–æ–º MLOps –ø—Ä–æ–µ–∫—Ç–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∫–ª–∞—Å—Å–∏—á–µ—Å–∫–∏–π **GitHub Flow**:

- `main` - –≤—Å–µ–≥–¥–∞ —Å—Ç–∞–±–∏–ª—å–Ω–∞—è, –≥–æ—Ç–æ–≤–∞—è –∫ –ø—Ä–æ–¥–∞–∫—à–µ–Ω—É –≤–µ—Ä—Å–∏—è
- Feature branches - —Å–æ–∑–¥–∞—é—Ç—Å—è –æ—Ç `main` –¥–ª—è –Ω–æ–≤—ã—Ö —Ñ–∏—á/—É–ª—É—á—à–µ–Ω–∏–π
- Pull Request + Code Review –¥–ª—è –≤—Å–µ—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ç–µ—Å—Ç—ã —á–µ—Ä–µ–∑ GitHub Actions
- –°–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–æ–µ –≤–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ (SemVer) –¥–ª—è —Ä–µ–ª–∏–∑–æ–≤

### –ü—Ä–æ—Ü–µ—Å—Å —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏:
1. –°–æ–∑–¥–∞—Ç—å feature branch: `git checkout -b feature/–∏–º—è_–≤–µ—Ç–∫–∏`
2. –†–∞–∑—Ä–∞–±–æ—Ç–∞—Ç—å —Ñ–∏—á—É, –∫–æ–º–º–∏—Ç–∏—Ç—å —Å Conventional Commits
3. –°–æ–∑–¥–∞—Ç—å Pull Request –≤ `main`
4. –ü—Ä–æ–π—Ç–∏ code review –∏ CI –ø—Ä–æ–≤–µ—Ä–∫–∏
5. –°–º–µ—Ä–∂–∏—Ç—å PR
6. –°–æ–∑–¥–∞—Ç—å —Ä–µ–ª–∏–∑–Ω—ã–π —Ç–µ–≥ –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏
---

# –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
pip install -r requirements.txt

## –û–±—Ä–∞–±–æ—Ç–∫–∞ –¥–∞–Ω–Ω—ã—Ö
python src/data/make_dataset.py  
python src/features/build_features.py

## –û–±—É—á–µ–Ω–∏–µ –º–æ–¥–µ–ª–∏
python src/models/train_model.py --config config/config.yaml

## –ó–∞–ø—É—Å–∫ API
uvicorn src.models.predict_model:app --host 0.0.0.0 --port 8000

---

# –ú–µ—Ç—Ä–∏–∫–∏
- Precision@K  
- Recall@K  
- MAP@K  
- NDCG  

---

# üê≥ Docker
docker build -t recommender-service -f docker/Dockerfile .  
docker run -p 8000:8000 recommender-service

---

# üîÅ CI/CD
GitHub Actions pipeline (`ci/pipeline.yml`)

---

# üëÄ –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
–î—Ä–µ–π—Ñ –¥–∞–Ω–Ω—ã—Ö –∏ –∫–∞—á–µ—Å—Ç–≤–∞, –∞–ª–µ—Ä—Ç—ã, rollback.

---

MovieLens Recommender Service
User Story
–ù–∞–∑–≤–∞–Ω–∏–µ: –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ —Ñ–∏–ª—å–º–æ–≤ –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Å—Ç—Ä–∏–º–∏–Ω–≥–æ–≤—ã—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
–ö–∞–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å—Ç—Ä–∏–º–∏–Ω–≥–æ–≤–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –ö–∏—Ä–∏–ª–ª), —è —Ö–æ—á—É –ø–æ–ª—É—á–∏—Ç—å –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ —Ñ–∏–ª—å–º–æ–≤, —á—Ç–æ–±—ã –±—ã—Å—Ç—Ä–µ–µ –Ω–∞–π—Ç–∏ –∏–Ω—Ç–µ—Ä–µ—Å–Ω—ã–π –∫–æ–Ω—Ç–µ–Ω—Ç –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –≤–µ—á–µ—Ä–æ–º.

–°—Ü–µ–Ω–∞—Ä–∏–π –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:

1. –ö–∏—Ä–∏–ª–ª –∑–∞—Ö–æ–¥–∏—Ç –≤ –º–æ–±–∏–ª—å–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Å—Ç—Ä–∏–º–∏–Ω–≥–æ–≤–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞

2. –ù–∞ –≥–ª–∞–≤–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ –≤–∏–¥–∏—Ç –±–ª–æ–∫ "–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –¥–ª—è –≤–∞—Å"

3. –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –µ–≥–æ ID –Ω–∞ —Å–µ—Ä–≤–µ—Ä —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π

4. –ü–æ–ª—É—á–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –∏–∑ 10 —Ñ–∏–ª—å–º–æ–≤ —Å ID –∏ –ø–æ–ª—É—á–∞–µ—Ç –∏—Ö –Ω–∞–∑–≤–∞–Ω–∏—è –∏–∑ –±–∞–∑—ã

5. –ö–∏—Ä–∏–ª–ª –≤—ã–±–∏—Ä–∞–µ—Ç —Ñ–∏–ª—å–º –∏ —Å–º–æ—Ç—Ä–∏—Ç


–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è
–í—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ: JSON —Å –ø–æ–ª—è–º–∏ user_id (int, ‚â•1), top_n (int, 1-50), model_type ("baseline"|"content")

–í—ã—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ: JSON —Å –ø–æ–ª—è–º–∏ user_id, model_type, top_n, recommendations (—Å–ø–∏—Å–æ–∫ movieId), count

–í–∞–ª–∏–¥–∞—Ü–∏—è: Pydantic –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è, 422 –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö

–ú–æ–¥–µ–ª—å: –ó–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è MovieLens Small –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ, –ø–æ–¥–¥–µ—Ä–∂–∫–∞ 2 –∞–ª–≥–æ—Ä–∏—Ç–º–æ–≤

Health check: GET /health –≤—Å–µ–≥–¥–∞ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç {"status": "ok"}
